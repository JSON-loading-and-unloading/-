<h2>JIT 컴파일 개요</h2>

핫스팟은 프로파일 기반 최적화(PGO)를 이용해 JIT 컴파일 여부를 판단한다.</br>
내부적으로는 핫스팟 실행 프로그램 정보를 메서드 데이터 객체(MDO)라는 구조체에 저장한다.</br>
MDO의 역할 : 바이트 코드 인터프리터와 c1 컴파일러에서 jit 컴파일러가 언제, 무슨 최적화를 할지 결정하는 데 필요한 정보를 기록하는 것이다.</br>
(어떤 메서드가 호출됐고, 어느 분기문으로 갈라졌는지, 또 호출부에서는 무슨 타입이었는지 등의 정보가 담겨있다.)</br>

컴파일의 시작</br>
1. 프로파일링된 프로퍼티의 '사용 빈도'를 카운터에 계속 기록하고 그렇게 기록한 값들은 프로파일링을 거치면서 차츰 사라진다. 이로 컴파일 큐 맨 앞에 이르렀을 때도 아직 핫한 메서드만 컴파일된다.
2. 프로파일링 데이터가 모이고 컴파일 결정을 내린 후에ㅔ 컴파일러별 세부 처리 절차로 넘어간다.
3. 컴파일러는 컴파일할 코드의 내부 표현형을 빌드한다.
4. 컴파일러는 이 내부 표현형을 토대로 코드를 컴파일한다.
   핫스팟 jit 컴파일러는 다양한 최신 컴파일 최적화 기법을 총 동원</br>
    - 인라이닝
    - 루프 펼치기
    - 탈출 분석
    - 락 생략/확장
    - 단일형 디스패치
    - 인트린직
    - 온-스택 치환
5. 컴파일 c1은 추측성 최적화를 안한다. 따라서 실행 성격이 어떨지 확실하지 않은 가정하에 최적화를 하지 않는다.
6. c2는 런타임 실행을 주시한 결과를 토대로 추정을 하고 그에 따른 최적화를 수행


   실제로 돌려보면 미리 추정한 것과 엉뚱하게ㅔ 츨러가 무용지물되는 경우도 있다.</br>
   => 추측성을 최적화를 하기 전에 항상 가드라는 타당성 검사를 함.</br>
   가드는 앞서 추정한 내용이 여전히 유효한지 최적화된 코드를 실행할 때마다 확인한다.</br></br>

가드마저 실패하면 더 이상 컴파일드 코드는 안전하지 않으므로 제거한다.</br>
※핫스팟은 혹여 부정확한 코드가 실행되는 불상사를 막기 위해 즉시 해당 메ㅔ서드를 인터프리티드 모드로 강등시켜 역최적화한다.</br>
